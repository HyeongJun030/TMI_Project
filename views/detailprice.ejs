<!DOCTYPE html>
<html lang="ko">
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.4.0/Chart.min.js"></script>

<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Ïû•ÎπÑÏÑú</title>
  <meta name="description" content="A project that provides price data services." />
  <meta name="author" content="TMI" />

  <link rel="stylesheet" href="/styles/reset.css" />
  <link rel="stylesheet" href="/styles/detailprice.css" />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Gothic+A1:wght@300;400;500;700;800&display=swap"
    rel="stylesheet" />
  <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons" />
  <link rel="icon" type="image/png" href="/assets/icons/favicon.png" />


</head>

<body>
  <header class="header" display="none">
    <!-- Navbar -->
    <nav id="navbar__vers-green">
      <div class="navbar__logo">
        <a href="/">
          <img src="/assets/icons/jang_logo_green.png" alt="Ïû•ÎπÑÏÑú Î°úÍ≥†" class="logo__green" />
        </a>
      </div>
      <ul class="navbar__menu">
        <li>
          <a href="/shoppinglist" class="navbar__menu__item">ÏáºÌïë Î¶¨Ïä§Ìä∏</a>
        </li>
        <li>
          <a href="/pricedata" class="navbar__menu__item active">Ïò§ÎäòÏùò Î¨ºÍ∞Ä</a>
        </li>
        <li>
          <a href="/accountbook" class="navbar__menu__item">Í∞ÄÍ≥ÑÎ∂Ä Ï†ïÎ¶¨</a>
        </li>
        <li><a href="/signin" class="navbar__menu__item">ÌöåÏõêÍ∞ÄÏûÖ</a></li>
        <li>
          <button type="button" id="open" class="navbar__menu__login-btn">
            Î°úÍ∑∏Ïù∏
          </button>
        </li>
      </ul>
    </nav>
  </header>
  <!-- Title bar -->

  <section id="titlebar">
    <div id="titleText">
      <span class="tit__sub__txt">Îß§ÏùºÎß§Ïùº,&nbsp</span>
      <h1>Ïò§ÎäòÏùò Î¨ºÍ∞Ä ÌôïÏù∏ÌïòÍ∏∞ üîç</h1>
    </div>

  </section>

  <!--Detail Price page-->
  <section id="detailprice" class="section">
    <div class="detailprice">
      <div class="detailprice_left">
        <div class="detailprice_left_top">
          <div class="detailprice_left_top_title">
            <h2>
              <%=item_name%>
            </h2>
          </div>
          <div class="detailprice_left_top_price">
            ÌèâÍ∑† &nbsp
            <span class="detailprice_left_top_redtext">
              <%= today %>
            </span>
            &nbsp Ïõê
          </div>
        </div>
        <div class="detailprice_left_bottom">
          <div class="detailprice_left_bottom_price">
            <div class="detailprice_left_bottom_price_left">
              <h2>Í∞ÄÍ≤©</h2>
            </div>
            <div class="detailprice_left_bottom_price_right">
              <h2>ÏÉÅÌíà <span>
                  <%= unit %>
                </span> Í∏∞Ï§Ä</h2>
            </div>
          </div>
          <div class="detailprice_left_bottom_table">
            <table class="table">
              <tr class="graph">
                <td>Íµ¨Î∂Ñ</td>
                <td>1ÏùºÏ†Ñ</td>
                <td>ÌïúÎã¨Ï†Ñ</td>
                <td>1ÎÖÑÏ†Ñ</td>
              </tr>
              <tr class="graph1">
                <td class="graph_td">Ï†ÑÍµ≠ ÌèâÍ∑†Í∞Ä</td>
                </td>
                <td>
                  <%= day %>
                </td>
                <td>
                  <%= month %>
                </td>
                <td>
                  <%= year %>
                </td>
              </tr>
              <tr class="graph2">
                <td class="graph_td">Îì±ÎùΩÍ∞Ä</td>
                <td id="dayBefore">
                  <script>
                    a = "<%= today %>";
                    b = "<%= day %>";
                    nowPrice_num = parseInt(a.replace(",", ""));
                    prevDayPrice_num = parseInt(b.replace(",", ""));
                    res = nowPrice_num - prevDayPrice_num;
                    if (res > 0) {
                      node = document.getElementById("dayBefore");
                      node.style.color = "blue";
                      node.innerText = "-" + res;
                    } else if (res < 0) {
                      node = document.getElementById("dayBefore");
                      node.style.color = "red";
                      node.innerHTML = "+" + Math.abs(res);
                    } else {
                      node = document.getElementById("dayBefore");
                      node.innerHTML = "-";
                    }
                  </script>
                </td>
                <td id="MonthBefore">
                  <script>
                    a = "<%= today %>";
                    b = "<%= month %>";
                    nowPrice_num = parseInt(a.replace(",", ""));
                    prevMonthPrice_num = parseInt(b.replace(",", ""));
                    res = nowPrice_num - prevMonthPrice_num;
                    if (res > 0) {
                      node = document.getElementById("MonthBefore");
                      node.style.color = "blue";
                      node.innerText = "-" + res;
                    } else if (res < 0) {
                      node = document.getElementById("MonthBefore");
                      node.style.color = "red";
                      node.innerHTML = "+" + Math.abs(res);
                    } else {
                      node = document.getElementById("MonthBefore");
                      node.innerHTML = "-";
                    }
                  </script>
                </td>
                <td id="YearBefore">
                  <script>
                    a = "<%= today %>";
                    b = "<%= year %>";
                    nowPrice_num = parseInt(a.replace(",", ""));
                    prevYearPrice_num = parseInt(b.replace(",", ""));
                    res = nowPrice_num - prevYearPrice_num;
                    if (res > 0) {
                      node = document.getElementById("YearBefore");
                      node.style.color = "blue";
                      node.innerText = "-" + res;
                    } else if (res < 0) {
                      node = document.getElementById("YearBefore");
                      node.style.color = "red";
                      node.innerHTML = "+" + Math.abs(res);
                    } else {
                      node = document.getElementById("YearBefore");
                      node.innerHTML = "-";
                    }
                  </script>
                </td>
              </tr>
            </table>
          </div>
        </div>
      </div>
      <div class="detailprice_right">
        <div class="detailprice_right_title">
          <div class="detailprice_right_title_left">
            <h2>Í∞ÄÍ≤© Î≥ÄÎèô Ï∂îÏù¥</h2>
          </div>
          <div class="detailprice_right_title_right">
            <h2> <span class="commonyear"> ‚ñ† </span> 1Ïùº Ï†Ñ <span class="yesteryear"> ‚ñ† </span> ÌïúÎã¨ Ï†Ñ <span
                class="thisyear">
                ‚ñ† </span> 1ÎÖÑ Ï†Ñ </h2>
          </div>

        </div>
        <div class="detailprice_right_chart">

          <!-- Ï∞®Ìä∏ ÏãúÏûë -->

          <div class="detailprice_right_chart_display">
            <canvas id="mixedChart"></canvas>
          </div>
          <script>
            dayBefore = "<%= day %>";
            monthBefore = "<%= month %>";
            yearBefore = "<%= year %>";
            prevDayPrice_num = parseInt(dayBefore.replace(",", ""));
            prevMonthPrice_num = parseInt(monthBefore.replace(",", ""));
            prevYearPrice_num = parseInt(yearBefore.replace(",", ""));

            const ctx = document.getElementById("mixedChart").getContext("2d");

            const mixedChart = new Chart(ctx, {
              type: 'bar',
              data: {
                datasets: [{
                  label: 'Í∞ÄÍ≤©_Bar',
                  data: [
                    prevDayPrice_num,
                    prevMonthPrice_num,
                    prevYearPrice_num,
                  ],
                  borderColor: 'rgb(255, 99, 132)',
                  backgroundColor: ['rgba(255, 99, 132, 0.2)',
                    'rgba(54, 162, 235, 0.2)',
                    'rgba(255, 206, 86, 0.2)']
                }, {
                  label: 'Í∞ÄÍ≤©_line',
                  data: [
                    prevDayPrice_num,
                    prevMonthPrice_num,
                    prevYearPrice_num,
                  ],
                  type: 'line',
                  fill: false,
                  borderColor: 'rgb(54, 162, 235)'
                }],
                labels: ["1Ïùº Ï†Ñ", "ÌïúÎã¨ Ï†Ñ", "1ÎÖÑ Ï†Ñ"]
              },


            });
          </script>

          <!-- Ï∞®Ìä∏ ÎÅù -->
        </div>
      </div>
    </div>
  </section>
</body>

</html>